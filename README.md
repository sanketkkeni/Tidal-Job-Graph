# Tidal-Job-Graph
Created from SSIS package

Tidal Graph.dtsx
**SSIS Package to generate a Tidal job graph that represents the Dependencies between different Projects.**
**Also tracks the changes made in Tidal Graph**

**DEPENDENCIES: required before running this package**
1. Python (3.7) -- https://www.python.org/downloads/release/python-373/ (download the 32-bit installer--Windows x86 executable installer)
2. GVEdit (for creating the graph)(Python API is used to render the graph pdf) -- https://graphviz.gitlab.io/_pages/Download/Download_windows.html (download the installer version - graphviz-2.38.msi)
3. Add Python and GVEdit installed paths to your system Environment's Path Variable. The values should be something like the following: 'C:\Program Files (x86)\Graphviz2.38\bin\', 'C:\Users\SKeni\AppData\Local\Programs\Python\Python37-32\', 'C:\Users\SKeni\AppData\Local\Programs\Python\Python37-32\Scripts\'
4. Add 'graphviz' module in Python (pip install graphviz)

Apart from the 2 project parameters, this package needs 3 package parameters:
1. PythonExecutablePath --> Path to Python executable file
2. ActualProdAdmiral_ConnectionString --> Connection String for Admiral-Prod
3. SnapshotAdmiral_ConnectionString --> Connection String for Admiral-Snapshot

This package generates 5 output files: 
1. Complete Tidal Job Graph.pdf
2. Color Labels.pdf (Labels for the colors used in Graphs)
3. Tidal Master Key.csv 
4. Tidal Job Graph Latest Changes.pdf -- Job Chain representing Post-Change
5. Tidal Job Graph Previous Changes.pdf -- Job Chain representing Pre-Change

**Understanding the Graphs**

1. Each node corresponds to a Tidal Job and line/s connecting them shows how they are connected to each other i.e. they show the Dependents and Successors of each Tidal Jobs. Standalone Tidal Jobs without a Successor or Dependent are excluded from all the graphs. This information is included in the "Tidal Master Key.csv" file though. Thus "Tidal Master Key.csv" file has a list of all Tidal Jobs, its dependents and Successors.
2. The Graph Label information in the graph is provided in the "Color Labels.pdf".
3. The "Complete Tidal Job Graph.pdf" file shows all the Tidal Jobs. 
4. "Tidal Job Graph Latest Changes.pdf" shows Job Chains that are affected after changes are made in Tidal. These Job changes include 1) Adding/Deleting/Updating a Job/Dependency and 2)Enabling/Disabling a Job. Also node colors like project colors, disabled job colors are excluded from this graph to make it easier to spot the changes.
5. "Tidal Job Graph Previous Changes.pdf" shows Job Chains that are affected before any changes are made in Tidal. 
6. Any dependencies that are non-Tidal Jobs are not shown in the graphs(eg. File paths etc).
7. The Red Line Relationship indicates that the Child Job has OR dependency on its parents(i.e. any one of the parent job completion will kick off the Child Job). The non-Red Relationship indicates an AND dependency (i.e. all the parent jobs need to succeed in order to start the Child Job).
8. The "Tidal Master Key.csv" file does not show leading zeros when viewed from Excel. So open a blank Excel, from 'Data' tab -> import the csv file and select the "Do not detect data types" option. From the Tidal Job, the node value acts as a key which gives information about Tidal jobs.
9. The Project colors in the graph are generated by mapping in the following order:
Package list in the catalog --> Mapped to custom colors assigned to each project --> Each package mapped to SQL Agent Job --> SQL Agent Job mapped to Tidal Job --> This gives color to a Tidal Job.
10. The graph especially shows the SSIS 2016 and SSIS 2008 jobs and color codes them according to its project.
11. Black color node shows the Tidal jobs which calls SSIS packages from multiple projects.

**Understanding the Tidal Master Key**

1. Key --> Identify a node in the Graphs
2. Job Path --> Tidal Job Path
3. SSIS Packages --> SSIS package/s invoked by a particular job. Blank value if it doesn't execute a package
4. Subgraph Number --> Number to identify each individual Job chain. 'Blank' value signifies that job is standalone-meaning no Dependencies or Successors.
5. Jobs in this Subgraph --> List of all the jobs that are a part of the current job's Job chain
6. Job Enabled? --> Y = Active Job; N = Inactive Job
7. color --> Color in the graphs. This is also available in Color Labels.pdf
8. project --> Tech Turn Project name that a particular job is a part of.
9. Dependency AND/OR --> OR dependency on its parents(i.e. any one of the parent job completion will kick off the Child Job) ; AND dependency (i.e. all the parent jobs need to succeed in order to start the Child Job).
10. Dependency Count --> Number of this job's dependencies.
11. Dependency List --> List of this job's dependencies.
12. Successor Count --> Number of this job's Successors.
13. Successor List --> List of this job's Successors.
